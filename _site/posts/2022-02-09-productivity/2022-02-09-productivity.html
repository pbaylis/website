<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.25">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2022-02-09">

<title>Productivity and the work habits that work (for me) – Patrick Baylis</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../img/favicon-camping.png" rel="icon" type="image/png">
<script src="../../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../../site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-7b89279ff1a6dce999919e0e67d4d9ec.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-ff63373b1067ca6f91cf1456aa1f00a2.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<link href="../../site_libs/quarto-contrib/fontawesome6-1.2.0/all.min.css" rel="stylesheet">
<link href="../../site_libs/quarto-contrib/fontawesome6-1.2.0/latex-fontsize.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script data-goatcounter="https://patrickbaylis.goatcounter.com/count" async="" src="//gc.zgo.at/count.js"></script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../../index.html" class="navbar-brand navbar-brand-logo">
    </a>
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Patrick Baylis</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../research.html"> 
<span class="menu-text">Research</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../pdf/Baylis_CV.pdf"> 
<span class="menu-text">CV</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../teaching.html"> 
<span class="menu-text">Teaching</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../posts.html"> 
<span class="menu-text">Blog</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/pbaylis"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://bsky.app/profile/patrickbaylis.bsky.social"> 
<span class="menu-text"><i class="fa-brands fa-bluesky" aria-label="bluesky"></i></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Productivity and the work habits that work (for me)</h1>
                                <div class="quarto-categories">
                <div class="quarto-category">productivity</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">February 9, 2022</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#caveats" id="toc-caveats" class="nav-link active" data-scroll-target="#caveats">Caveats</a></li>
  <li><a href="#principles" id="toc-principles" class="nav-link" data-scroll-target="#principles">Principles</a></li>
  <li><a href="#habits" id="toc-habits" class="nav-link" data-scroll-target="#habits">Habits</a>
  <ul class="collapse">
  <li><a href="#research-specific-habits" id="toc-research-specific-habits" class="nav-link" data-scroll-target="#research-specific-habits">Research-specific habits</a></li>
  </ul></li>
  <li><a href="#tools" id="toc-tools" class="nav-link" data-scroll-target="#tools">Tools</a></li>
  <li><a href="#resources" id="toc-resources" class="nav-link" data-scroll-target="#resources">Resources</a></li>
  <li><a href="#wrapping-up" id="toc-wrapping-up" class="nav-link" data-scroll-target="#wrapping-up">Wrapping up</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>(Original post April 10, 2021, updated February 9, 2022. This blog post is <a href="https://anchor.fm/hidden-curriculum/episodes/E32---Productivity-and-work-habits-with-Patrick-Baylis-e1edv13">discussed</a> on the excellent <a href="https://anchor.fm/hidden-curriculum">Hidden Curriculum</a> podcast with <a href="https://hollina.github.io/">Alex Hollingsworth</a> and <a href="https://sebastiantellotrillo.com/">Sebastian Tello-Trillo</a>.)</p>
</div>
</div>
<p>I used to think a lot about productivity. I still do, but I used to, too. (Joke credit to the late, great <a href="https://www.youtube.com/watch?v=VqHA5CIL0fg">Mitch Hedberg</a>.)</p>
<p>What is productivity? The boring economics-y definition is “rate of output per unit of input,” which is accurate but mostly unhelpful. A more human definition, and one I prefer, is “<strong>doing good work in a sustainable way</strong>.” So a productive week for me is one where I generate valuable pieces of work, like cleaned data, lesson plans, or sections of a paper (“good work”) while also staying happy and healthy by doing other non-work things that I love (“in a sustainable way”). Not all weeks feel that way, but over the years I’ve found that some behaviors are more likely to lead to productive weeks than others. And turning these good behaviors into <strong>habits</strong> has helped me get more done with less time and frustration than I did early in my career.</p>
<p>Developing those habits is what this post is about. In a previous and now slightly cringe-inducing <a href="../../blog/2015-09-08-researchproductivity/">note</a>, I wrote about the kinds of practices and tools that I found useful for maintaining productivity as a grad student. In the five years since I wrote that, my thinking has continued to evolve. The following is a loose meander through that thinking.</p>
<p>I’ll start with some necessary <strong>caveats</strong>, then discuss the <strong>principles</strong> that underpin my thoughts about productivity, list a few of my favorite <strong>habits</strong> (including some that are more specific to my job as a researcher), and link to some of the <strong>tools</strong> that I currently use. I’ll wrap up with a brief list of some <strong>resources</strong> that have helped me form these ideas.</p>
<section id="caveats" class="level2">
<h2 class="anchored" data-anchor-id="caveats">Caveats</h2>
<ol type="1">
<li><p><strong>The ideas in this post are aspirational.</strong> I can assure you that I fail to demonstrate these habits <strong>all the time</strong>. In fact, I would guess that I fail more often than I succeed. I suspect that most people who write about productivity are the same way, though you might not know it from their marketing copy. We’re all human here, and it’s worth remembering that <strong>incremental improvement is still improvement</strong>.</p></li>
<li><p><strong>What works for me may not work for you.</strong> We’re all different, with different abilities and challenges. If something you read here doesn’t make sense or doesn’t work for you, ignore it! Just thinking carefully what kind of habits are likely to lead to a healthy and productive life <strong>for you</strong> is the most important part of the process.</p></li>
</ol>
<p>With those out of the way, let’s get started!</p>
</section>
<section id="principles" class="level2">
<h2 class="anchored" data-anchor-id="principles">Principles</h2>
<p>I have a few of principles I try keep in mind when I think about being productive.</p>
<ol type="1">
<li><p><strong>The goal is to get stuff done.</strong> This seems obvious, but I’ve found it’s often easy to get diverted onto low-value tasks that offer quick dopamine hits, rather than to spend time on the stuff that <strong>really matters</strong>. We all have metrics that we use to determine if we’ve been successful. Some might be given to us externally, some we choose on our own. If you’re a researcher like me, your “stuff” is (mainly) writing good research papers and teaching well. It is not, for example, writing as many emails as possible or identifying the best possible note-taking tool. (I’m guilty of spending too much time on both of those, by the way.) A good litmus test here is to ask yourself: will I be happy a year from now that I accomplished this task?</p></li>
<li><p><strong>Writing IS thinking.</strong> My sense is that most people think writing is simply transcribing ideas from your brain. It is not. Writing is a critical part of the creative process and is far more <strong>generative</strong> (in terms of leading to new ideas) than we realize. When you force yourself to write down something you will refine it, improve on it, and probably come up with something new entirely. Waiting to write until they “have a good idea” is one of the most common mistakes I see in early-career PhD students. (Note to self: a full post on how to structure writing so it can lead to good ideas is probably in order at some point.)</p></li>
<li><p><strong>Don’t use your brain as a hard drive.</strong> Free your brain to do what it is best at: <strong>sparking ideas</strong>! Don’t use it to retain TODO lists, guidance for how to best code something, new projects that you want to start, your schedule for the week, long-term goals, or frankly anything that could easily be stored on a sheet of paper or computer. Make a note somewhere retrievable and let your brain move on to something else!</p></li>
<li><p><strong>Future-proof what you can.</strong> Consider the computer and the programs you’re using right now. Were you using that same computer and those same programs ten years ago? Even five years ago? I doubt it. I also doubt you’ll be using the same computer and programs five or ten years in the future. So future-proof whatever you can. That means: use systems that are easily backed up and recognize that you will probably change tools soon (if you’re like me, very likely within six months), so don’t overinvest in the ones you’re using now, and make sure that you’ll be able to get the data out of them easily.</p></li>
</ol>
</section>
<section id="habits" class="level2">
<h2 class="anchored" data-anchor-id="habits">Habits</h2>
<p>With those principles in mind, the following are a semi-categorized list of habits that I aspire to. Many of these are either stolen directly from or indirectly inspired by one or more of the resources I list below, so I claim no credit for them. In particular, <a href="https://www.goodreads.com/book/show/37880811-make-time">Make Time</a>, by Jake Knapp and John Zeratsky, is probably my favorite book on the topic and the source for many of these ideas.</p>
<ul>
<li><strong>Protect your productive times of day.</strong> Mornings are my most creative and productive times, so I <strong>schedule almost all of my meetings in the afternoons</strong>. (Some people find that they are most productive and creative at night. Adjust accordingly.)</li>
<li><strong>Write first.</strong> My absolute best days are the ones where I start the day with thirty minutes of writing.</li>
<li><strong>Momentum matters</strong>. Start a larger set of tasks by taking on a small, achievable goal. Get the momentum going!</li>
<li>Commit to getting your written work in front of someone else <strong>as soon as possible</strong>. As I said above, writing is thinking. Writing for an audience is better thinking. Writing for an audience that you expect to <strong>edit</strong> your work is the best thinking.</li>
<li><strong>Deadlines are highly motivating</strong>. Submit to conferences, agree to presentations, commit to returning drafts by a certain date. Don’t wait until you feel the work is “ready” (it never will be), give yourself a deadline.</li>
<li><strong>Your brain hates a bad plan</strong>. Writing down a plan for the day/week/month is almost always time well spent.</li>
<li>Pick a “<strong>highlight</strong>” to be the 60 to 90 minute centerpiece of your day. It’s not the only thing you’ll do that day, but think of it as the thing that you’ll reflect on later as your major accomplishment for the day. It doesn’t have to be work, though!</li>
<li><strong>Block your schedule</strong>. By blocking off writing time, or even writing time for a particular project, you can free your mind from stressing about that project at other times.</li>
<li><strong>Every task should have a deliverable.</strong> A deliverable is a specific product of your work. Having tasks linked to deliverables keeps you accountable to yourself (and others, if you’re collaborating). A bad task would be something like “work on the data section,” which isn’t specific and doesn’t involve a deliverable. A better task would be “write the paragraph of the paper that describes how the weather data were collected.”</li>
<li><strong>Preempt distractions.</strong> If you have horrible impulse control, like me, <strong>minimize distractions</strong> by knowing what triggers you to waste time. For example, I will often leave my phone either in my bag or in my car.</li>
<li>Have a plan for what you’re about to do <strong>before</strong> you open a screen, including your laptop.</li>
<li>In general, I know that I can lose large chunks of time to <strong>infinite scroll</strong> apps (Instagram, Twitter, Facebook, …), so I keep them off my phone and I don’t stay logged in on my computer. Adding a small effort cost for accessing these apps seems to help me avoid them.</li>
<li>The nights when I work late into the night almost always result in a loss of energy and motivation the next day. Instead, <strong>shut it down</strong> while you still have every and something to dive into tomorrow. Go read a book, or hang out with friends or family. It’s better to maintain a constant stream of work and to enjoy your leisure time. Leisure time is recharge time.</li>
<li>Not everyone is like this, but I absolutely <strong>require exercise</strong>. I’ve come to know when I’m likely to hit lulls and try to aim my workouts for those times. That’s usually just before lunch or around 2 or 3:30.</li>
<li>“No” is the <strong>most important word in the world</strong>. Especially as a junior academic, you will be tempted to say yes to projects, tasks, committees, and so on. Nobody knows what is on your plate except for you, and it’s your job to protect your time. The people who want you to succeed will understand when you decline. (I say this with some hesitancy, since I’m aware that folks who look like me - white men - do not receive as many asks as our minority or female colleagues. So let me caveat this advice with the suggestion that if you do look like me, please do consider who is likely to take on this task if you aren’t. These are not easy dilemmas.)</li>
<li><strong>Email is evil</strong>. It really is. Anything you can do to limit the flood of mail is enormously important. Very few people reading this will have their job performance determined by how many emails they responded to.</li>
<li><strong>Don’t neglect your mental health.</strong> Journaling, meditating, therapy, whatever works for you. I do none of them all the time, but all of them some of the time.</li>
<li><strong>Don’t obsess about productivity.</strong> It’s possible to overdo it and to become focused on checking off as many tasks as possible. I’ve been there, and it can become joyless. Having a highlight helps here.</li>
</ul>
<section id="research-specific-habits" class="level3">
<h3 class="anchored" data-anchor-id="research-specific-habits">Research-specific habits</h3>
<p>If you’re a researcher like me, there are a few habits that are particularly useful for our field (but likely for others, too).</p>
<ul>
<li><strong>Be ruthless about your project load.</strong> I have found that I can, at most, actively push forward <strong>two</strong> research projects at once. If I try to spread my scarce research time over four or five projects, nothing actually gets done. Switching costs are real and large, so it’s better to focus intensely one one thing for, say, a six week sprint, than to spread yourself thin across five or six projects all the time. (Note: if you manage a research team, the math here is a bit different, but the general principle of focusing your own active research time holds.)</li>
<li><strong>Get to a minimum viable research product</strong>. As they say in silicon valley, “fail fast.” Ask yourself what would kill your project, and try to figure out if it’s likely to do so as quickly as possible.</li>
<li><strong>Mock up data to write clean code.</strong> Whenever I write code on invented dataset, it always works out better for me. Rather than deal the the messy, real dataset I can make progress on only the critical pieces. And I know they’re critical because I had to construct the data. Then when I apply it to the real data, I’m much less likely to get caught up in the details.</li>
<li><strong>Pre-comment your code</strong>. Instead of just starting with code, start by describing what you want the code to do. First line of a piece of code should describe what that code will do in general. Then, you can generate a series of comments that outline the functions you’ll need, the steps you’ll take, and so on.</li>
<li>Again, <strong>write for an audience</strong>. The main reason why I generate these blog posts is actually self-serving. By writing for an audience, I force myself to be clear and concise (at least as much as I am capable). In the end, the posts are helpful for me even years down the line.</li>
</ul>
</section>
</section>
<section id="tools" class="level2">
<h2 class="anchored" data-anchor-id="tools">Tools</h2>
<p>I hesitate to discuss specific tools too much (see Principle #4 above), since I know how mercurial I am with what I use. But for the record, here’s the set of applications that are most often open on my computer.</p>
<ul>
<li><strong>Markdown</strong> for as much as possible.
<ul>
<li>Writing, preparing lecture slides, note-taking. I even make this website using Markdown (well, <a href="https://bookdown.org/yihui/blogdown/">blogdown</a>).</li>
<li>My weapon of choice is <a href="https://atom.io/">Atom</a>. Other people like Sublime Text.</li>
</ul></li>
<li><a href="https://www.r-project.org/">R</a>/<a href="https://www.rstudio.com/">RStudio</a> for almost all of my coding / analysis tasks. I used to use more Python and Stata, but R does almost everything I neeed now.</li>
<li><a href="https://www.alfredapp.com/">Alfred</a> (OS X) to avoid hunting through my file structure. It’ll change your life.</li>
<li><a href="https://www.notion.so/">Notion</a>: Note-taking, personal task management. There are lots of tools like Notion: I previously used <a href="https://roamresearch.com/">Roam Research</a>, and before that <a href="https://bear.app/">Bear</a>, but they’re all mostly interchangeable. I just need something that allows me to quickly get ideas out of my brain and somewhere where I can find them later.</li>
<li><a href="https://github.com/">Github</a> for project management, especially across a team. (I could write a whole post on how to use Github Issues for research.)</li>
</ul>
</section>
<section id="resources" class="level2">
<h2 class="anchored" data-anchor-id="resources">Resources</h2>
<ul>
<li><a href="https://www.goodreads.com/book/show/37880811-make-time">Make Time</a> (Jake Knapp and John Zeratsky). This is probably my favorite single resource on productivity. I find it much more reasonable and accessible than many of the other resources out there, which can be dogmatic.</li>
<li>Most of <a href="https://www.calnewport.com/">Cal Newport</a>’s books are worth a read.</li>
<li><a href="https://gettingthingsdone.com/">Getting Things Done</a> (David Allen): A system for planning work that’s been useful in shaping my thinking.</li>
<li><a href="https://fortelabs.co/blog/para/">PARA System</a> (Tiago Forte): Helped guide how I set up my document structure. It’s not perfect, but I haven’t found anything better yet. On the other hand, Alfred (see above) has basically obviated having a good document structure for me.</li>
</ul>
</section>
<section id="wrapping-up" class="level2">
<h2 class="anchored" data-anchor-id="wrapping-up">Wrapping up</h2>
<p>I hope you’ve found something useful here. I’ve noticed that documenting these ideas and discussing them with friends and colleagues has often led me to insightful conversations about how all of us can improve our ability to do good work (sustainably). I’m hopeful that this post will spark some useful ideas for you as well, and if you have any thoughts I’d love to <a href="https://www.twitter.com/pbaylis">hear</a> them!</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>